<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="style.css">
        <!--TODO: Need to access D3 in the console?-->
        <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    </head>
    
    <body>
        <div class="bar"></div> 

        <h1>Learning D3</h1>
        <script type="module">
            import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
            console.log("Imported D3");
            
            //var dataset = [
            //    4, 99, 21, 2, 34, 70, 62, 3, 55, 8
            //];
            var dataset = []
            for (var i=0; i<25; i++) {
                // Generate a random number between 0 and 100
                var d = Math.random() * 100;
                dataset.push(d);
            }
            d3.select("body").selectAll("p")
                .data(dataset)
                .enter()
                .append("div")
                .attr("class", "bar")
                .style("height", function(d) {
                    var barHeight = d*5; // scale the height for visibility
                    return barHeight + "px";
                })
                .style("background-color", function(d) {
                    if (d > 50) {
                        return "#cc5555"; // a nicer red
                    } else {
                        return "teal";
                    }
                });
            
            // Create an SVG element inside the DOM body element
            var width = 500;
            var height = 50;
            var svg = d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            var dataset = [5, 10, 15, 20, 25];
            // Create circle elements inside the SVG element
            var circles = svg.selectAll("circle") // returns a reference to empty Circle elements
                .data(dataset) // Binds each data item in `dataset` to each Circle element
                .enter() // Return a reference to the new element
                .append("circle"); // Add circle to the DOM

            // Apply styles to each Circle, depending on the binded data item
            circles.attr("cx", function(d, i) { // d=data element, i=index
                    return (i*50) + 25;
                })
                .attr("cy", height/2)
                .attr("r", function(d) {
                    return d;
                })
                .attr("fill", function(d) {
                    if (d%10 == 0) {
                        return "#db7fef";
                    } else {
                        return "#91ebf7";
                    }
                })
                .attr("stroke", "#d3f9ff")
                .attr("stroke-width", 5);
        </script>
    </body>
    
</html>
